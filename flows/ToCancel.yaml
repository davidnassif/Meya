name: ToCancel
states:
    text_buttons_state:
        component: meya.text_buttons
        properties:
            text: شكرا على اتصالك بنا ، هل الزيارة التي تحتاج إلى إلغاءها أقل من 24 ساعة؟
            output: button_click
            buttons:
                - text: نعم
                  action: Yes
                  data:
                    foo: bar
                - text: لا
                  action: No
        transitions:
            Yes: LessThan24Hours
            No: NoLessThanAnHour
        delay:
            relative: 10
    LessThan24Hours:
        component: meya.text
        properties:
            text: يتم تطبيق رسوم الإلغاء إلا إذا قمت بإلغاء جلسة العمل الخاصة بك قبل أقل من 24 ساعة جلسة التنظيف. ستكون الرسوم 100٪ من إجمالي جلسة التنظيف. خلاف ذلك ، سيتم فرض أي رسوم الإلغاء
        action: next
        delay:
            relative: 10
        transitions:
            next: AfterCancelationInfo
    AfterCancelationInfo:
        component: meya.text_buttons
        properties:
            text: هل تريد مني المتابعة؟ 
            output: button_click
            buttons:
                - text: نعم
                  action: YesProcceed
                  data:
                    foo: bar
                - text: لا
                  action: NoProcceed
                - text: Talk to an agent
                  action: TalkToAnAgent
        transitions:
            YesProcceed: YesProcceed
            NoProcceed: NoProcceed
            TalkToAnAgent: TalkToAnAgent
        delay:
            relative: 10
    YesProcceed:
        component: meya.text
        properties:
            text: سيتم إلغاء الحجز الخاص بك بعد قليل وسوف تتلقى تأكيدًا.
        delay:
            relative: 10
        return: true
    NoProcceed:
        component: meya.text_buttons
        properties:
            text: شكرًا على تفهمك، هل ترغب في تعديل الزيارات المستقبلية؟
            output: button_click
            buttons:
                - text: نعم
                  action: YesModifyVisit
                  data:
                    foo: bar
                - text: لا
                  action: NoModifyVisit
        transitions:
            YesModifyVisit: YesModifyVisit
            NoModifyVisit: NoModifyVisit
        delay:
            relative: 10
    NoModifyVisit:
        component: meya.text
        properties:
            text: "هذا رائع ، لا تتردد في إخبارنا إذا كنت بحاجة إلى المزيد من المساعدة ، فنحن هنا لخدمتك \U0001F604" 
        delay:
            relative: 10
        return: true
    TalkToAnAgent:
        component: meya.text
        properties:
            text: حسنًا يا عزيزي ، عادةً ما يرد المتخصص في بضع دقائق
            action: cancel
        delay:
            relative: 10
        transitions:
            cancel: NoLessThanAnHour
    NoLessThanAnHour:
        component: meya.text_buttons
        properties:
            text: هل أنت مهتم في حجز
            output: button_click
            buttons:
                - text: زيارة واحدة
                  action: next
                  flow: SingleVisit
                  data:
                    foo: bar
                - text: صفقة
                  action: next
                  flow: Package
        delay:
            relative: 10